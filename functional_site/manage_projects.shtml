<!DOCTYPE html>
<meta charset="utf-8">
<html>
	<head>
        <title>Manage Projects</title>
        <link rel="icon" href="static/images/KBase_favicon.ico" type="image/x-icon">
        <link href="static/bootstrap-3.0.0/css/bootstrap.min.css" rel="stylesheet">
        <link href="static/css/kbase_stylesheet.css" rel="stylesheet">
        <style type="text/css">
        #project_stuff{
          max-width: 800px;
        }
         ul.subnav{
          padding: 1.5em 0 0 0;
         }
        ul.subnav li{
          list-style-type: none;
          margin: 10px;
          width: 80%;
        }
        ul.subnav li a{
          display: block;
          background-color: #BBE8F9;
          /*#61C9F2;*/
          width: 100%;
          color: #065ABF;
          padding: 10px;
          border-radius: 8px;
        }
        #username_group{
          width: 30%;
        }
        #permlevel_group{
          width: 50%;
        }
        #add_group{
          width: 15%;
        }
        h4{
          padding-top: 1.5em;
        }
        body {
          margin-bottom: 50px;
        }
        a.data-toggle {
          color: #0088cc;
        }
        a:hover {
          cursor:pointer;
        }
        .in, .collapse, .collapsing {
          padding-left: 25px;
        }

        </style>
    </head>

    <body>
      <!--#include virtual="header.html" -->

		<main class="container">
    <div class="row">
   		<div id="subnav" class="col-sm-3" role="navigation">
   			<ul class="subnav">
   				<li><a href="profile.shtml">Profile</a></li>
   				<li><a href="manage_subs.shtml">Manage Subscriptions</a></li>
  				<li><a href="manage_projects.shtml">Manage Projects</a></li>
  				<li><a href="manage_teams.shtml">Manage Teams</a></li>
  			</ul>
		  </div>

      <div id="project_stuff" class="col-sm-8">
  			<h1>Manage Projects</h1>
        
        <div id="success_message" class="alert alert-success" style="display: none;">
          <span></span>
          <button type="button" class="close" aria-hidden="true">&times;</button>
          
        </div>
        
        <div id="error_message" class="alert alert-danger" style="display: none;">
          <span></span>
          <button type="button" class="close" aria-hidden="true">&times;</button>
        </div>
  			<p>A project holds assets that can be shared by members. Project members&mdash;the people who have permission to use the project's assets&mdash;can be individuals or teams. You set permissions for all assets shared in the project, but you can set additional permissions on any individual asset. </p>
        <div>
    			<h2><span class="glyphicon glyphicon-plus"></span> Create a New Project</h2>
    			<p><label for="projectname">Project Name</label> <input type="text" id="projectname" /> <button id="create_project" class="btn btn-default">Add</button></p>
        </div>
        <div id="project_area">
          <img src="./static/images/ajax-loader.gif" id="projects_loading" style="display: none;"  />
        </div>
        

        <!-- <div class="archives">
            <h2><a href="#archive_list" data-toggle="collapse" data-target="#archive_list"><span class="glyphicon glyphicon-play"></span> Archived Projects</a></h2>
          <div id="archive_list" class="collapse">
            <p>Celery Root Geometry <button class="btn btn-default">Unarchive</button></p>
          </div>
        </div> -->
      </div><!-- end project stuff -->

		</div><!-- end row -->
    </main><!-- end main container -->
		<script src="static/js/jquery-1.10.2.min.js"></script>
		<script src="static/bootstrap-3.0.0/js/bootstrap.min.js"></script>
		<script src="static/dataTables/1.9.4/js/jquery.dataTables.js"></script>
    <script src="static/js/jquery.cookie.min.js"></script>
    <script src="static/js/kbwidget.js"></script>
    <script src="static/js/kbasePrompt.js"></script>
    <script src="static/js/kbaseLogin.js"></script>
		<script src="static/js/kbase.js"></script>
    <script src="static/js/underscore.js"></script>
    <script src="static/js/ICanHaz.min.js"></script>
    <script src="static/js/projects.js"></script>
    <script src="static/js/manage_projects.js"></script>
    <script src="static/js/header.js"></script>


    <!-- HTML Templates -->
    <script id="project_list" type="text/html">
    {{#projects}}
      <div class="accordion" id="P_{{project_id}}">
            <div class="accordion-heading">
              <h2 class="projectname"><a class="data-toggle" data-toggle="collapse" data-target="#collapse_{{project_id}}"><span class="glyphicon glyphicon-chevron-right"></span>&nbsp;{{project_name}}</a></h2> 
            </div>
            <div id="collapse_{{project_id}}" class="collapse">
              <a href="./project.shtml#{{project_id}}" class="btn btn-default">View Project Assets</a> 

              <h3>Project Permissions</h3>
              <div id="success_message_{{project_id}}" class="alert alert-success" style="display: none;">
                <span></span>
                <button type="button" class="close" aria-hidden="true">&times;</button>

              </div>
              
              <div id="error_message_{{project_id}}" class="alert alert-danger" style="display: none;">
                <span></span>
                <button type="button" class="close" aria-hidden="true">&times;</button>
              </div>
              <img src="./static/images/ajax-loader.gif" id="users_{{project_id}}_loading" style="display: none;"  />
              <div id="no_{{project_id}}_users" style="display: none;">This project is currently private.</div>
              <table id="user_{{project_id}}_rows" class="perms">
                
              </table>
              <h4>Add permissions for a new person</h4>
              <form class="form-inline" role="form">
                <div class="form-group" id="username_group">
                  <label for="username">Username of the person</label>
                  <input type="text" class="form-control new_username" placeholder="Username">
                  <input type="hidden" class="form-control new_user_project" value="{{project_id}}">
                </div>
                <div class="form-group" id="permlevel_group">
                  <label for="permlevel">Permission Level</label>
                  <select class="form-control new_permlevel" id="permlevel">
                    <option value="r">Read (read and comment only)</option>
                    <option value="w">Edit (Clone + link, edit narratives, update datasets)</option>
                    <option value="a">Admin (Edit + manage assets and permissions)</option>
                    <option value="n">Remove</option></select>
                </div>
                <div class="form-group" id="add_group"><br />
                <button type="button" class="btn btn-default add_new_user">Add</button>&nbsp;
                <img src="./static/images/ajax-loader.gif" id="adding_user_{{project_id}}" style="display: none;"  />
                </div>
              </form>
            </div><!-- collapse -->
        </div><!-- end accordion -->
    {{/projects}}
    </script>

    <script id="user_row" type="text/html">
    {{#users}}
                <tr id="{{username}}_row_{{project_id}}">
                  <input type="hidden" class="inline_project" value="{{project_id}}">
                  <input type="hidden" class="inline_username" value="{{username}}">
                  <td>{{username}}</td> 
                  <td>
                    <select id="{{username}}_permission_{{project_id}}" class="form-control inline_permission">
                    <option {{selectedread}} value="r">Read (read and comment only)</option>
                    <option {{selectedwrite}} value="w">Edit (Clone + link, edit narratives, update datasets)</option>
                    <option {{selectedadmin}} value="a">Admin (Edit + manage assets and permissions)</option>
                    <option {{selectednone}} value="n">Remove</option>
                    </select>
                  </td>
                  <td><button class="btn btn-default inlinePermissionUpdate">Update</button></td>
                </tr>
    {{/users}}
    </script>


    </body>
</html>
